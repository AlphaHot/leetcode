<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>133. Clone Graph</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="assets/css/asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_133_clone_graph">133. Clone Graph</a>
<ul class="sectlevel2">
<li><a href="#_解题分析">解题分析</a></li>
<li><a href="#_参考资料">参考资料</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_133_clone_graph"><a class="anchor" href="#_133_clone_graph"></a>133. Clone Graph</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://leetcode.com/problems/clone-graph/">LeetCode - Clone Graph</a></p>
</div>
<div class="paragraph">
<p>Given a reference of a node in a <strong><a href="https://en.wikipedia.org/wiki/Connectivity_(graph_theory)#Connected_graph">connected</a></strong> undirected graph.</p>
</div>
<div class="paragraph">
<p>Return a <a href="https://en.wikipedia.org/wiki/Object_copying#Deep_copy"><strong>deep copy</strong></a> (clone) of the graph.</p>
</div>
<div class="paragraph">
<p>Each node in the graph contains a val (<code>int</code>) and a list (<code>List[Node]</code>) of its neighbors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class Node {
    public int val;
    public List&lt;Node&gt; neighbors;
}</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Test case format:</strong></p>
</div>
<div class="paragraph">
<p>For simplicity sake, each node&#8217;s value is the same as the node&#8217;s index (1-indexed). For example, the first node with <code>val = 1</code>, the second node with <code>val = 2</code>, and so on. The graph is represented in the test case using an adjacency list.</p>
</div>
<div class="paragraph">
<p><strong>Adjacency list</strong> is a collection of unordered <strong>lists</strong> used to represent a finite graph. Each list describes the set of neighbors of a node in the graph.</p>
</div>
<div class="paragraph">
<p>The given node will always be the first node with <code>val = 1</code>. You must return the <strong>copy of the given node</strong> as a reference to the cloned graph.</p>
</div>
<div class="paragraph">
<p><strong>Example 1:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/0133-1-clone_graph_question.png" alt="0133 1 clone graph question">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre><strong>Input:</strong> adjList = [[2,4],[1,3],[2,4],[1,3]]
<strong>Output:</strong> [[2,4],[1,3],[2,4],[1,3]]
<strong>Explanation:</strong> There are 4 nodes in the graph.
1st node (val = 1)'s neighbors are 2nd node (val = 2) and 4th node (val = 4).
2nd node (val = 2)'s neighbors are 1st node (val = 1) and 3rd node (val = 3).
3rd node (val = 3)'s neighbors are 2nd node (val = 2) and 4th node (val = 4).
4th node (val = 4)'s neighbors are 1st node (val = 1) and 3rd node (val = 3).</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 2:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/0133-2-graph.png" alt="0133 2 graph">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre><strong>Input:</strong> adjList = [[]]
<strong>Output:</strong> [[]]
<strong>Explanation:</strong> Note that the input contains one empty list. The graph consists of only one node with val = 1 and it does not have any neighbors.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 3:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre><strong>Input:</strong> adjList = []
<strong>Output:</strong> []
<strong>Explanation:</strong> This an empty graph, it does not have any nodes.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example 4:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/0133-3-graph.png" alt="0133 3 graph">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre><strong>Input:</strong> adjList = [[2],[1]]
<strong>Output:</strong> [[2],[1]]</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Constraints:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>1 &#8656; Node.val &#8656; 100</code></p>
</li>
<li>
<p><code>Node.val</code> is unique for each node.</p>
</li>
<li>
<p>Number of Nodes will not exceed 100.</p>
</li>
<li>
<p>There is no repeated edges and no self-loops in the graph.</p>
</li>
<li>
<p>The Graph is connected and all nodes can be visited starting from the given node.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_解题分析"><a class="anchor" href="#_解题分析"></a>解题分析</h3>
<div class="paragraph">
<p>这道题可以使用类似 <a href="0138-copy-list-with-random-pointer.html">138. Copy List with Random Pointer</a> 的解法来求解。</p>
</div>
<div id="src-0133" class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-{java_source_attr}" data-lang="{java_source_attr}">package com.diguage.algorithm.leetcode;

import java.util.*;

/**
 * @author D瓜哥, https://www.diguage.com/
 * @since 2020-02-10 00:22
 */
public class _0133_CloneGraph {
    // Definition for a Node.
    static class Node {
        public int val;
        public List&lt;Node&gt; neighbors;

        public Node() {
            val = 0;
            neighbors = new ArrayList&lt;Node&gt;();
        }

        public Node(int _val) {
            val = _val;
            neighbors = new ArrayList&lt;Node&gt;();
        }

        public Node(int _val, ArrayList&lt;Node&gt; _neighbors) {
            val = _val;
            neighbors = _neighbors;
        }
    }

    /**
     * Runtime: 28 ms, faster than 34.86% of Java online submissions for Clone Graph.
     * Memory Usage: 38.8 MB, less than 5.88% of Java online submissions for Clone Graph.
     */
    public Node cloneGraphDfs(Node node) {
        Map&lt;Node, Node&gt; dict = new HashMap&lt;&gt;();
        return dfs(node, dict);
    }

    private Node dfs(Node node, Map&lt;Node, Node&gt; dict) {
        if (Objects.isNull(node)) {
            return null;
        }
        if (dict.containsKey(node)) {
            return dict.get(node);
        }
        Node clone = new Node(node.val, new ArrayList&lt;&gt;(node.neighbors.size()));
        dict.put(node, clone);
        for (Node n : node.neighbors) {
            clone.neighbors.add(dfs(n, dict));
        }
        return clone;
    }

    /**
     * Runtime: 26 ms, faster than 47.60% of Java online submissions for Clone Graph.
     * Memory Usage: 39.3 MB, less than 5.88% of Java online submissions for Clone Graph.
     */
    public Node cloneGraph(Node node) {
        if (Objects.isNull(node)) {
            return null;
        }
        Map&lt;Node, Node&gt; dict = new HashMap&lt;&gt;();
        dict.put(node, new Node(node.val, new ArrayList&lt;&gt;(node.neighbors.size())));
        Deque&lt;Node&gt; deque = new LinkedList&lt;&gt;();
        deque.addLast(node);
        while (!deque.isEmpty()) {
            Node curr = deque.removeFirst();
            for (Node n : curr.neighbors) {
                if (!dict.containsKey(n)) {
                    dict.put(n, new Node(n.val, new ArrayList&lt;&gt;(n.neighbors.size())));
                    deque.addLast(n);
                }
                dict.get(curr).neighbors.add(dict.get(n));
            }
        }

        return dict.get(node);
    }

    public static void main(String[] args) {
        _0133_CloneGraph solution = new _0133_CloneGraph();
        solution.cloneGraph(new Node(1));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_参考资料"><a class="anchor" href="#_参考资料"></a>参考资料</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://leetcode-cn.com/problems/clone-graph/solution/dfs-he-bfs-by-powcai/">DFS 和 BFS - 克隆图 - 力扣（LeetCode）</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-02-13 11:39:08 +0800
</div>
</div>
</body>
</html>